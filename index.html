<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prize Claim Portal</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <script src="https://cdn.tailwindcss.com"></script>

    <script src="https://accounts.google.com/gsi/client" async defer></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-out forwards',
                        'slide-up': 'slideUp 0.5s ease-out forwards',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { opacity: '0', transform: 'translateY(10px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gradient-to-br from-slate-50 to-slate-200 text-slate-800 min-h-screen flex flex-col items-center justify-center p-4">

<div class="bg-white w-full max-w-md rounded-2xl shadow-2xl overflow-hidden transition-all duration-300">

    <div class="h-2 bg-gradient-to-r from-red-600 to-red-500"></div>

    <div class="p-8">

        <div class="flex justify-center mb-6">
            <img
                    src="https://crispystacks.com/gallery_gen/70a3149714b18a46e3af0c11da41f88a_600x470_fit.png?ts=1762528991"
                    alt="Logo"
                    class="h-24 w-auto object-contain"
            >
        </div>

        <div id="login-state" class="animate-slide-up text-center">
            <div class="mb-8">
                <h1 class="text-2xl font-bold tracking-tight text-slate-900">Claim Your Prize</h1>
                <p class="text-slate-500 mt-2 text-sm">Sign in to verify your winning entry.</p>
            </div>

            <div class="space-y-4">
                <button id="login-button" class="group relative w-full flex justify-center items-center py-3 px-4 border border-transparent text-sm font-medium rounded-lg text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-all duration-200 shadow-md hover:shadow-lg">
                    <svg class="w-5 h-5 mr-3 text-white/90 group-hover:text-white transition-colors" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.377.505 9.377.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
                    </svg>
                    Sign In with YouTube
                </button>

                <div id="error-message" class="hidden p-3 rounded-lg bg-red-50 border border-red-100 text-red-600 text-sm text-center animate-fade-in">
                    Authorization failed. Please try again.
                </div>
            </div>

            <div class="mt-8 text-center text-xs text-slate-400">
                Powered by YouTube Data API
            </div>
        </div>

        <div id="loading-state" class="hidden py-8 text-center animate-fade-in">
            <div class="relative w-16 h-16 mx-auto">
                <div class="absolute inset-0 border-4 border-slate-100 rounded-full"></div>
                <div class="absolute inset-0 border-4 border-red-600 rounded-full border-t-transparent animate-spin"></div>
            </div>
            <h3 class="mt-6 text-lg font-medium text-slate-900">Verifying Account</h3>
            <p class="text-slate-500 text-sm mt-1">Checking your channel credentials...</p>
        </div>

        <div id="form-state" class="hidden animate-fade-in">
            <div class="flex items-center justify-between mb-8 p-4 bg-slate-50 rounded-lg border border-slate-100">
                <div>
                    <p class="text-xs font-semibold text-slate-400 uppercase tracking-wide">Identity Verified</p>
                    <p id="channel-name" class="font-bold text-slate-800 text-lg mt-0.5">User</p>
                </div>
                <div class="bg-green-100 text-green-700 px-3 py-1 rounded-full text-xs font-medium flex items-center">
                    <svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                    Verified
                </div>
            </div>

            <h2 class="text-xl font-bold text-slate-900 mb-6">Where should we send it?</h2>

            <form id="details-form" class="space-y-5">
                <div>
                    <label for="full-name" class="block text-sm font-medium text-slate-700 mb-1">Full Name</label>
                    <input type="text" id="full-name" autocomplete="name" required class="w-full rounded-lg border-slate-300 border px-4 py-2.5 text-slate-900 focus:ring-2 focus:ring-red-500 focus:border-transparent outline-none transition-shadow bg-slate-50 focus:bg-white shadow-sm">
                </div>

                <div>
                    <label for="address-line1" class="block text-sm font-medium text-slate-700 mb-1">Address Line 1</label>
                    <input type="text" id="address-line1" autocomplete="address-line1" required class="w-full rounded-lg border-slate-300 border px-4 py-2.5 text-slate-900 focus:ring-2 focus:ring-red-500 focus:border-transparent outline-none transition-shadow bg-slate-50 focus:bg-white shadow-sm">
                </div>

                <div>
                    <label for="city" class="block text-sm font-medium text-slate-700 mb-1">City</label>
                    <input type="text" id="city" autocomplete="address-level2" required class="w-full rounded-lg border-slate-300 border px-4 py-2.5 text-slate-900 focus:ring-2 focus:ring-red-500 focus:border-transparent outline-none transition-shadow bg-slate-50 focus:bg-white shadow-sm">
                </div>

                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label for="state" class="block text-sm font-medium text-slate-700 mb-1">State</label>
                        <input type="text" id="state" autocomplete="address-level1" required class="w-full rounded-lg border-slate-300 border px-4 py-2.5 text-slate-900 focus:ring-2 focus:ring-red-500 focus:border-transparent outline-none transition-shadow bg-slate-50 focus:bg-white shadow-sm">
                    </div>
                    <div>
                        <label for="zip" class="block text-sm font-medium text-slate-700 mb-1">ZIP Code</label>
                        <input type="text" id="zip" autocomplete="postal-code" required class="w-full rounded-lg border-slate-300 border px-4 py-2.5 text-slate-900 focus:ring-2 focus:ring-red-500 focus:border-transparent outline-none transition-shadow bg-slate-50 focus:bg-white shadow-sm">
                    </div>
                </div>

                <button type="submit" class="w-full mt-2 bg-slate-900 hover:bg-slate-800 text-white font-semibold py-3 px-4 rounded-lg shadow-md transition-colors duration-200 focus:ring-2 focus:ring-offset-2 focus:ring-slate-900">
                    Submit Details
                </button>
            </form>
        </div>

        <div id="success-state" class="hidden text-center py-8 animate-fade-in">
            <div class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6">
                <svg class="w-10 h-10 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
            </div>
            <h2 class="text-2xl font-bold text-slate-900 mb-2">You're all set!</h2>
            <p class="text-slate-600 max-w-xs mx-auto">Your shipping information has been received. Watch your inbox for tracking details.</p>
            <button onclick="location.reload()" class="mt-8 text-sm text-red-600 font-medium hover:text-red-700">
                Back to Home
            </button>
        </div>

    </div>
</div>

<script>
    // --- ‚öôÔ∏è CONFIGURATION ‚öôÔ∏è ---
    const CLIENT_ID = '753346673939-e63gqpcmgvruea5a3da783q66hmcv59e.apps.googleusercontent.com'; // <-- Paste your ID here
    const YOUTUBE_SCOPE = 'https://www.googleapis.com/auth/youtube.readonly';
    // -----------------------------

    // Elements
    const views = {
        login: document.getElementById('login-state'),
        loading: document.getElementById('loading-state'),
        form: document.getElementById('form-state'),
        success: document.getElementById('success-state')
    };
    const errorMsg = document.getElementById('error-message');

    // Switch View Helper
    function switchView(viewName) {
        Object.values(views).forEach(el => el.classList.add('hidden'));
        views[viewName].classList.remove('hidden');
    }

    // Google Identity Services Initialization
    let tokenClient;
    function initClient() {
        tokenClient = google.accounts.oauth2.initTokenClient({
            client_id: CLIENT_ID,
            scope: YOUTUBE_SCOPE,
            callback: (tokenResponse) => {
                if (tokenResponse && tokenResponse.access_token) {
                    verifyUser(tokenResponse.access_token);
                } else {
                    errorMsg.classList.remove('hidden');
                }
            },
            error_callback: (err) => {
                console.error(err);
                errorMsg.classList.remove('hidden');
            }
        });
    }

    // Wait for Google Script
    window.onload = () => {
        const checkGoogle = setInterval(() => {
            if (window.google && window.google.accounts) {
                clearInterval(checkGoogle);
                initClient();
            }
        }, 100);
    };

    // Event Listeners
    document.getElementById('login-button').addEventListener('click', () => {
        errorMsg.classList.add('hidden');
        if (tokenClient) tokenClient.requestAccessToken();
    });

    document.getElementById('details-form').addEventListener('submit', async (e) => {
        e.preventDefault();
        // Simulate API submission
        const submitBtn = e.target.querySelector('button[type="submit"]');
        const originalText = submitBtn.innerText;

        submitBtn.disabled = true;
        submitBtn.innerText = "Sending...";
        submitBtn.classList.add('opacity-75');

        // Collect Data (Mock)
        const data = {
            name: document.getElementById('full-name').value,
            channel: document.getElementById('channel-name').innerText,
            // ... other fields
        };
        console.log("üì¶ Payload:", data);

        // Fake Network Delay
        await new Promise(r => setTimeout(r, 1500));
        switchView('success');
    });

    // API Logic
    async function verifyUser(token) {
        switchView('loading');
        try {
            const res = await fetch('https://www.googleapis.com/youtube/v3/channels?part=snippet&mine=true', {
                headers: { 'Authorization': `Bearer ${token}` }
            });

            if (!res.ok) throw new Error('API Failed');

            const data = await res.json();
            if (data.items?.length > 0) {
                document.getElementById('channel-name').textContent = data.items[0].snippet.title;
                switchView('form');
            } else {
                throw new Error('No Channel Found');
            }
        } catch (err) {
            console.error(err);
            switchView('login');
            errorMsg.textContent = "Verification failed. Try again.";
            errorMsg.classList.remove('hidden');
        }
    }
</script>
</body>
</html>